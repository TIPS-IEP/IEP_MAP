doctype html
html(lang='en')
  head
    //- css
    link(rel="stylesheet" href="stylesheets/admin.css")

    //- js
    script(src="javascripts/index.js")
    //- script(src="javascripts/map.js")

    //- bootstrap setup
    link(rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous")
    
    //- jquery
    script(src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous")
    script(src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous")
  
    //- center website 
    meta(name='viewport' content='width=device-width, initial-scale=1')
    
    //- google font set up
    link(rel="preconnect" href="https://fonts.gstatic.com")
    link(href="https://fonts.googleapis.com/css2?family=Lato:wght@300&display=swap" rel="stylesheet")
body
    //- include ../common/nav
    script.
      var limit = 1;
      var data = "#{userData}".split(/\,+(?!\ )/);
      var unAuthUsers = new Array((data.length)/7)
      for (var i = 0; i < unAuthUsers.length; i++){
        unAuthUsers[i] = new Array();
      }
      var count = 0
      for(var i = 0; i < data.length; i++){
        if((i / 7) >= limit){
          count = count + 1;
          limit = limit + 1;
        }
        unAuthUsers[count].push(data[i]);
      }
      console.log(unAuthUsers.length)

      function generate_table() {
        // get the reference for the body
        var body = document.getElementsByTagName("body")[0];

        // creates a <table> element and a <tbody> element
        var tbl = document.createElement("table");
        var tblBody = document.createElement("tbody");

        // creating all cells
        for (var i = 0; i < unAuthUsers.length; i++) {
          // creates a table row
          var row = document.createElement("tr");

          for (var j = 0; j < 7; j++) {
            // Create a <td> element and a text node, make the text
            // node the contents of the <td>, and put the <td> at
            // the end of the table row
            var cell = document.createElement("td");
            var cellText = document.createTextNode(unAuthUsers[i][j]);
            cell.appendChild(cellText);
            row.appendChild(cell);
          }

          // add the row to the end of the table body
          tblBody.appendChild(row);
        }

        // put the <tbody> in the <table>
        tbl.appendChild(tblBody);
        // appends <table> into <body>
        body.appendChild(tbl);
        // sets the border attribute of tbl to 2;
        tbl.setAttribute("border", "2");
      }
    
    .container#table
      input(type="button" value="Generate a table." onclick="generate_table()")