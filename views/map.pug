doctype html
html(lang='en')
  head
    //- css
    link(rel="stylesheet" href="stylesheets/index.css")
    link(rel="stylesheet" href="stylesheets/map.css")

    //- js
    script(src="javascripts/index.js")

    //- bootstrap setup
    link(rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous")
    
    //- jquery
    script(src="https://code.jquery.com/jquery-3.6.0.js"
  integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  crossorigin="anonymous")
    script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous")
    script(src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous")
  
    //- center website 
    meta(name='viewport' content='width=device-width, initial-scale=1')

    script.
      var length = #{length};
      var i = 0;
      var tempName = "#{universityName}".split(/\,+(?!\ )/);
      var tempLat = "#{universityLat}".split(/\,+(?!\ )/);
      var tempLng = "#{universityLng}".split(/\,+(?!\ )/);
      var universityName = [];
      var universityLat = [];
      var universityLng = [];
      for(i in tempName){
        universityName[i] = tempName[i];
        universityLat[i] = tempLat[i];
        universityLng[i] = tempLng[i];
      }

      function initMap(){
          var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          center: {lat: 42, lng: -96.65625}
          });

          var features = [];
          var image = [];
          var icons = [];
          for(let i = 0; i<length; i++){
            features[i]={
              type:universityName[i],
              position: new google.maps.LatLng(universityLat[i],universityLng[i]),
            };
            const img = new Image();
            img.src = 'images/universities/'+universityName[i]+'.png';
            console.log(img.width/Math.sqrt(img.width*img.height/100));
            console.log(img.height/Math.sqrt(img.width*img.height/100));
            image[i] = {
              url: "images/universities/"+universityName[i]+".png",
              scaledSize: new google.maps.Size(img.width/Math.sqrt(img.width*img.height/1200),img.height/Math.sqrt(img.width*img.height/1200))
            };
            icons[i] = {
              icon: image[i],
            };
          }
          
          // Create markers.
          for (let i = 0; i < length; i++) {
              const marker = new google.maps.Marker({
              position: features[i].position,
              icon: icons[i].icon,
              map: map,
              });
          }
      
      }
        
  body
    include common/nav
    div#map
    script(async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBy8QR6hkmBw9pMJWs2XhY111wiGl5H3Sg&libraries=geometry&callback=initMap")
